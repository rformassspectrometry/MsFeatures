<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Grouping of sorted values into sets with smallest differences — groupConsecutive • MsFeatures</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Grouping of sorted values into sets with smallest differences — groupConsecutive" />
<meta property="og:description" content="groupConsecutive groups sorted values in x for which the difference
is smaller than maxDiff. As a result, the mean difference between the
groups will always be larger than maxDiff, but difference between
individual values within the same group (e.g. between the first and last)
can be larger maxDiff.
In detail, from the sorted x, the function starts from the smallest value
defining the first group as the one containing all values in x with a
difference to this first value which is &amp;lt;= maxDiff.
The next group is the defined based on the next larger value that is not part
of the first group and includes all values with a difference &amp;lt;= maxDiff to
this value. For values fulfilling this criteria but being already part of
a previous group, the differences to the mean value of the current group
and to the mean of previous groups are compared and values are assigned to
the group to which they have the smallest difference.
Example: values 1.1, 1.9, 2.2 should be grouped with a maxDiff = 1. The
first group is defined to include all values for which the difference to the
first value (1.1) is smaller maxDiff. Thus, the first group is defined
to contain values 1.1 and 1.9. Then the next group is defined based on the
next larger value not part of any group, 2.2. This group contains values
1.9 and 2.2 with the value 1.9 being already assigned to the first
group. The difference between this value 1.9 and the mean of the
current group (mean(c(1.9, 2.2)) is then compared to the difference of
1.9 to the mean value of the group 1.9 is already part of
(which is mean(c(1.1, 1.9))). Since the difference to the second group is
smaller, 1.9 is removed from the first group and assigned to the second
one." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MsFeatures</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RforMassSpectrometry/MsFeatures/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Grouping of sorted values into sets with smallest differences</h1>
    <small class="dont-index">Source: <a href='https://github.com/RforMassSpectrometry/MsFeatures/blob/master/R/grouping-functions.R'><code>R/grouping-functions.R</code></a></small>
    <div class="hidden name"><code>groupConsecutive.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>groupConsecutive</code> groups <strong>sorted</strong> values in <code>x</code> for which the difference
is smaller than <code>maxDiff</code>. As a result, the mean difference between the
groups will always be larger than <code>maxDiff</code>, but difference between
individual values within the same group (e.g. between the first and last)
can be larger <code>maxDiff</code>.</p>
<p>In detail, from the sorted <code>x</code>, the function starts from the smallest value
defining the first group as the one containing all values in <code>x</code> with a
difference to this first value which is <code>&lt;= maxDiff</code>.
The next group is the defined based on the next larger value that is not part
of the first group and includes all values with a difference <code>&lt;= maxDiff</code> to
this value. For values fulfilling this criteria but being already part of
a previous group, the differences to the mean value of the current group
and to the mean of previous groups are compared and values are assigned to
the group to which they have the smallest difference.</p>
<p>Example: values <code>1.1, 1.9, 2.2</code> should be grouped with a <code>maxDiff = 1</code>. The
first group is defined to include all values for which the difference to the
first value (<code>1.1</code>) is smaller <code>maxDiff</code>. Thus, the first group is defined
to contain values <code>1.1 and 1.9</code>. Then the next group is defined based on the
next larger value not part of any group, <code>2.2</code>. This group contains values
<code>1.9</code> and <code>2.2</code> with the value <code>1.9</code> being already assigned to the first
group. The difference between this value <code>1.9</code> and the mean of the
current group (<code>mean(c(1.9, 2.2)</code>) is then compared to the difference of
<code>1.9</code> to the mean value of the group <code>1.9</code> is already part of
(which is <code><a href='https://rdrr.io/r/base/mean.html'>mean(c(1.1, 1.9))</a></code>). Since the difference to the second group is
smaller, <code>1.9</code> is removed from the first group and assigned to the second
one.</p>
    </div>

    <pre class="usage"><span class='fu'>groupConsecutive</span><span class='op'>(</span><span class='va'>x</span>, maxDiff <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>numeric</code> of values that should be grouped.</p></td>
    </tr>
    <tr>
      <th>maxDiff</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> defining the threshold for difference between
values in <code>x</code> to be grouped into the same group.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>integer</code> with the group assignment (values grouped together have
the same return value).</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The difference between consecutive (ordered) values within a defined group
is always <code>&lt;= maxDiff</code>, but the difference between e.g. the first and the
last of the (ordered) values can be larger than <code>maxDiff</code>. See
<code><a href='groupClosest.html'>groupClosest()</a></code> for a more stringent grouping function.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other grouping operations: 
<code><a href='groupClosest.html'>groupClosest</a>()</code>,
<code><a href='groupSimilarityMatrix.html'>groupSimilarityMatrix</a>()</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## The example described above</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.1</span>, <span class='fl'>1.9</span>, <span class='fl'>2.2</span><span class='op'>)</span>
<span class='fu'>groupConsecutive</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 1 2 2</div><div class='input'>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.1</span>, <span class='fl'>1.5</span>, <span class='fl'>1.7</span>, <span class='fl'>2.3</span>, <span class='fl'>2.7</span>, <span class='fl'>4.3</span>, <span class='fl'>4.4</span>, <span class='fl'>4.9</span>, <span class='fl'>5.2</span>, <span class='fl'>5.4</span>, <span class='fl'>5.8</span>, <span class='fl'>6</span>, <span class='fl'>7</span>,
    <span class='fl'>9</span>, <span class='fl'>9.5</span>, <span class='fl'>15</span><span class='op'>)</span>

<span class='fu'>groupConsecutive</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] 1 1 1 2 2 3 3 3 4 4 4 4 5 6 6 7</div><div class='input'><span class='co'>## value 5.2 was initially grouped with 4.3 (because their difference is</span>
<span class='co'>## smaller 1, but then re-grouped together with 5.4 because the difference</span>
<span class='co'>## between 5.4 (the next value outside the group of 4.3) and 5.2 is smaller</span>
<span class='co'>## than its difference to the mean value of the group for value 4.3</span>

<span class='co'>## Example for a case in which values are NOT grouped into the same group</span>
<span class='co'>## even if the difference between them is &lt;= maxDiff</span>
<span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4.9</span>, <span class='fl'>5.2</span>, <span class='fl'>5.4</span><span class='op'>)</span>
<span class='fu'>groupConsecutive</span><span class='op'>(</span><span class='va'>a</span>, maxDiff <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 1 2 2</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by RforMassSpectrometry Package Maintainer, Johannes Rainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


