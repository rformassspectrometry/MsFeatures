<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="groupConsecutive groups sorted values in x for which the difference
is smaller than maxDiff. As a result, the mean difference between the
groups will always be larger than maxDiff, but difference between
individual values within the same group (e.g. between the first and last)
can be larger maxDiff.
In detail, from the sorted x, the function starts from the smallest value
defining the first group as the one containing all values in x with a
difference to this first value which is &amp;lt;= maxDiff.
The next group is the defined based on the next larger value that is not part
of the first group and includes all values with a difference &amp;lt;= maxDiff to
this value. For values fulfilling this criteria but being already part of
a previous group, the differences to the mean value of the current group
and to the mean of previous groups are compared and values are assigned to
the group to which they have the smallest difference.
Example: values 1.1, 1.9, 2.2 should be grouped with a maxDiff = 1. The
first group is defined to include all values for which the difference to the
first value (1.1) is smaller maxDiff. Thus, the first group is defined
to contain values 1.1 and 1.9. Then the next group is defined based on the
next larger value not part of any group, 2.2. This group contains values
1.9 and 2.2 with the value 1.9 being already assigned to the first
group. The difference between this value 1.9 and the mean of the
current group (mean(c(1.9, 2.2)) is then compared to the difference of
1.9 to the mean value of the group 1.9 is already part of
(which is mean(c(1.1, 1.9))). Since the difference to the second group is
smaller, 1.9 is removed from the first group and assigned to the second
one."><title>Grouping of sorted values into sets with smallest differences — groupConsecutive • MsFeatures</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Grouping of sorted values into sets with smallest differences — groupConsecutive"><meta property="og:description" content="groupConsecutive groups sorted values in x for which the difference
is smaller than maxDiff. As a result, the mean difference between the
groups will always be larger than maxDiff, but difference between
individual values within the same group (e.g. between the first and last)
can be larger maxDiff.
In detail, from the sorted x, the function starts from the smallest value
defining the first group as the one containing all values in x with a
difference to this first value which is &amp;lt;= maxDiff.
The next group is the defined based on the next larger value that is not part
of the first group and includes all values with a difference &amp;lt;= maxDiff to
this value. For values fulfilling this criteria but being already part of
a previous group, the differences to the mean value of the current group
and to the mean of previous groups are compared and values are assigned to
the group to which they have the smallest difference.
Example: values 1.1, 1.9, 2.2 should be grouped with a maxDiff = 1. The
first group is defined to include all values for which the difference to the
first value (1.1) is smaller maxDiff. Thus, the first group is defined
to contain values 1.1 and 1.9. Then the next group is defined based on the
next larger value not part of any group, 2.2. This group contains values
1.9 and 2.2 with the value 1.9 being already assigned to the first
group. The difference between this value 1.9 and the mean of the
current group (mean(c(1.9, 2.2)) is then compared to the difference of
1.9 to the mean value of the group 1.9 is already part of
(which is mean(c(1.1, 1.9))). Since the difference to the second group is
smaller, 1.9 is removed from the first group and assigned to the second
one."><meta property="og:image" content="https://rformassspectrometry.github.io/Spectra/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MsFeatures</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/MsFeatures.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/MsFeatures/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Grouping of sorted values into sets with smallest differences</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsFeatures/blob/HEAD/R/grouping-functions.R" class="external-link"><code>R/grouping-functions.R</code></a></small>
      <div class="d-none name"><code>groupConsecutive.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>groupConsecutive</code> groups <strong>sorted</strong> values in <code>x</code> for which the difference
is smaller than <code>maxDiff</code>. As a result, the mean difference between the
groups will always be larger than <code>maxDiff</code>, but difference between
individual values within the same group (e.g. between the first and last)
can be larger <code>maxDiff</code>.</p>
<p>In detail, from the sorted <code>x</code>, the function starts from the smallest value
defining the first group as the one containing all values in <code>x</code> with a
difference to this first value which is <code>&lt;= maxDiff</code>.
The next group is the defined based on the next larger value that is not part
of the first group and includes all values with a difference <code>&lt;= maxDiff</code> to
this value. For values fulfilling this criteria but being already part of
a previous group, the differences to the mean value of the current group
and to the mean of previous groups are compared and values are assigned to
the group to which they have the smallest difference.</p>
<p>Example: values <code>1.1, 1.9, 2.2</code> should be grouped with a <code>maxDiff = 1</code>. The
first group is defined to include all values for which the difference to the
first value (<code>1.1</code>) is smaller <code>maxDiff</code>. Thus, the first group is defined
to contain values <code>1.1 and 1.9</code>. Then the next group is defined based on the
next larger value not part of any group, <code>2.2</code>. This group contains values
<code>1.9</code> and <code>2.2</code> with the value <code>1.9</code> being already assigned to the first
group. The difference between this value <code>1.9</code> and the mean of the
current group (<code>mean(c(1.9, 2.2)</code>) is then compared to the difference of
<code>1.9</code> to the mean value of the group <code>1.9</code> is already part of
(which is <code>mean(c(1.1, 1.9))</code>). Since the difference to the second group is
smaller, <code>1.9</code> is removed from the first group and assigned to the second
one.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">groupConsecutive</span><span class="op">(</span><span class="va">x</span>, maxDiff <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><code>numeric</code> of values that should be grouped.</p></dd>
<dt>maxDiff</dt>
<dd><p><code>numeric(1)</code> defining the threshold for difference between
values in <code>x</code> to be grouped into the same group.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>integer</code> with the group assignment (values grouped together have
the same return value).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The difference between consecutive (ordered) values within a defined group
is always <code>&lt;= maxDiff</code>, but the difference between e.g. the first and the
last of the (ordered) values can be larger than <code>maxDiff</code>. See
<code><a href="groupClosest.html">groupClosest()</a></code> for a more stringent grouping function.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other grouping operations: 
<code><a href="groupClosest.html">groupClosest</a>()</code>,
<code><a href="groupSimilarityMatrix.html">groupSimilarityMatrix</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## The example described above</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">1.9</span>, <span class="fl">2.2</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">groupConsecutive</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 2</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">1.5</span>, <span class="fl">1.7</span>, <span class="fl">2.3</span>, <span class="fl">2.7</span>, <span class="fl">4.3</span>, <span class="fl">4.4</span>, <span class="fl">4.9</span>, <span class="fl">5.2</span>, <span class="fl">5.4</span>, <span class="fl">5.8</span>, <span class="fl">6</span>, <span class="fl">7</span>,</span>
<span class="r-in">    <span class="fl">9</span>, <span class="fl">9.5</span>, <span class="fl">15</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">groupConsecutive</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 1 1 2 2 3 3 3 4 4 4 4 5 6 6 7</span>
<span class="r-in"><span class="co">## value 5.2 was initially grouped with 4.3 (because their difference is</span></span>
<span class="r-in"><span class="co">## smaller 1, but then re-grouped together with 5.4 because the difference</span></span>
<span class="r-in"><span class="co">## between 5.4 (the next value outside the group of 4.3) and 5.2 is smaller</span></span>
<span class="r-in"><span class="co">## than its difference to the mean value of the group for value 4.3</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Example for a case in which values are NOT grouped into the same group</span></span>
<span class="r-in"><span class="co">## even if the difference between them is &lt;= maxDiff</span></span>
<span class="r-in"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.9</span>, <span class="fl">5.2</span>, <span class="fl">5.4</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">groupConsecutive</span><span class="op">(</span><span class="va">a</span>, maxDiff <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Johannes Rainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

